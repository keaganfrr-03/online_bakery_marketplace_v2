{% extends "base_sidebar.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Edit Profile{% endblock %}

{% block sidebar %}

<!-- Contact page specific CSS -->
<link rel="stylesheet" href="{% static 'css/customer.css' %}">

<h6 class="sidebar-section-title">My Account</h6>
<ul class="nav flex-column">
    <li class="nav-item"><a class="nav-link active" href="{% url 'profile' %}"><i class="bi bi-person-circle me-2"></i> Profile Info</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'customer_orders' %}"><i class="bi bi-cart-check me-2"></i> Orders</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'customer_order_history' %}"><i class="bi bi-clock-history me-2"></i> Order History</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'cart' %}"><i class="bi bi-bag me-2"></i> Cart</a></li>
</ul>

<h6 class="sidebar-section-title">Navigation</h6>
<ul class="nav flex-column mb-2">
    <li class="nav-item"><a class="nav-link" href="{% url 'index' %}"><i class="bi bi-house me-2"></i> Home</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'about' %}"><i class="bi bi-info-circle me-2"></i> About</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}"><i class="bi bi-envelope me-2"></i> Contact</a></li>
</ul>
{% endblock %}

{% block content %}

<div class="profile-header">
    <h2><i class="bi bi-pencil-square me-2"></i> Edit Profile</h2>
    <p>Update your personal information and preferences</p>
</div>

<div class="row justify-content-center">
    <div class="col-12">
        <div class="profile-card">
            <form method="post">
                {% csrf_token %}

                <!-- Personal Information Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="bi bi-person-badge"></i>
                        Personal Information
                    </div>

                    <div class="row g-3">
                        <div class="col-md-3">
                            <label class="form-label">{{ form.first_name.label }}</label>
                            <div class="input-group-icon">
                                <i class="bi bi-person"></i>
                                {{ form.first_name|add_class:"form-control"|attr:"placeholder:First name" }}
                            </div>
                            {% if form.first_name.errors %}
                                <small class="text-danger">{{ form.first_name.errors.0 }}</small>
                            {% endif %}
                        </div>

                        <div class="col-md-3">
                            <label class="form-label">{{ form.last_name.label }}</label>
                            <div class="input-group-icon">
                                <i class="bi bi-person"></i>
                                {{ form.last_name|add_class:"form-control"|attr:"placeholder:Last name" }}
                            </div>
                            {% if form.last_name.errors %}
                                <small class="text-danger">{{ form.last_name.errors.0 }}</small>
                            {% endif %}
                        </div>

                        <div class="col-md-3">
                            <label class="form-label">{{ form.phone.label }}</label>
                            <div class="input-group-icon">
                                <i class="bi bi-telephone"></i>
                                {{ form.phone|add_class:"form-control"|attr:"placeholder:Phone number" }}
                            </div>
                            {% if form.phone.errors %}
                                <small class="text-danger">{{ form.phone.errors.0 }}</small>
                            {% endif %}
                        </div>

                        <div class="col-md-3">
                            <label class="form-label">{{ form.mobile.label }}</label>
                            <div class="input-group-icon">
                                <i class="bi bi-phone"></i>
                                {{ form.mobile|add_class:"form-control"|attr:"placeholder:Mobile number" }}
                            </div>
                            {% if form.mobile.errors %}
                                <small class="text-danger">{{ form.mobile.errors.0 }}</small>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Account & Payment Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="bi bi-credit-card"></i>
                        Account & Payment
                    </div>

                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">{{ form.email.label }}</label>
                            <div class="input-group-icon">
                                <i class="bi bi-envelope"></i>
                                {{ form.email|add_class:"form-control"|attr:"placeholder:your.email@example.com" }}
                            </div>
                            {% if form.email.errors %}
                                <small class="text-danger">{{ form.email.errors.0 }}</small>
                            {% endif %}
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">{{ form.payment_method.label }}</label>
                            <div class="input-group-icon">
                                {{ form.payment_method|add_class:"form-select" }}
                            </div>
                            {% if form.payment_method.errors %}
                                <small class="text-danger">{{ form.payment_method.errors.0 }}</small>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Delivery Address Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="bi bi-geo-alt"></i>
                        Delivery Address
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <label class="form-label">{{ form.delivery_address.label }}</label>
                            <div class="input-group-icon">
                                <i class="bi bi-house"></i>
                                {{ form.delivery_address|add_class:"form-control"|attr:"placeholder:Enter your full delivery address"|attr:"rows:3" }}
                            </div>
                            <small class="help-text">Include street address, city, and postal code</small>
                            {% if form.delivery_address.errors %}
                                <small class="text-danger d-block">{{ form.delivery_address.errors.0 }}</small>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Non-field errors -->
                {% if form.non_field_errors %}
                    <div class="alert alert-danger" role="alert">
                        {{ form.non_field_errors.0 }}
                    </div>
                {% endif %}

                <!-- Submit Buttons -->
                <div class="text-center mt-4">
                    <a href="{% url 'profile' %}" class="btn btn-secondary me-2">
                        <i class="bi bi-x-circle me-2"></i> Cancel
                    </a>
                    <button type="submit" class="btn-save">
                        <i class="bi bi-check-circle me-2"></i> Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}